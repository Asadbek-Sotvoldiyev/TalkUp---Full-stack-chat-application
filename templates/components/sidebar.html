{% load static %}
<aside class="sidebar bg-light">
    <div class="tab-content h-100" role="tablist">
     <!-- Friends -->
     <div class="tab-pane fade h-100" id="tab-content-friends" role="tabpanel">
      <div class="d-flex flex-column h-100">
       <div class="hide-scrollbar">
        <div class="container py-8">
         <!-- Title -->
         <div class="mb-8">
          <h2 class="fw-bold m-0">
           Friends
          </h2>
         </div>
         <!-- Search -->
         <div class="mb-6">
          <form action="#">
           <div class="input-group">
            <div class="input-group-text">
             <div class="icon icon-lg">
              <svg class="feather feather-search" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
               <circle cx="11" cy="11" r="8">
               </circle>
               <line x1="21" x2="16.65" y1="21" y2="16.65">
               </line>
              </svg>
             </div>
            </div>
            <input aria-label="Search for messages or users..." class="form-control form-control-lg ps-0" placeholder="Search messages or users" type="text"/>
           </div>
          </form>
          <!-- Invite button -->
          <div class="mt-5">
           <a class="btn btn-lg btn-primary w-100 d-flex align-items-center" data-bs-target="#modal-invite" data-bs-toggle="modal" href="#">
            Find Friends
            <span class="icon ms-auto">
             <svg class="feather feather-user-plus" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
              <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2">
              </path>
              <circle cx="8.5" cy="7" r="4">
              </circle>
              <line x1="20" x2="20" y1="8" y2="14">
              </line>
              <line x1="23" x2="17" y1="11" y2="11">
              </line>
             </svg>
            </span>
           </a>
          </div>
         </div>
         <!-- List -->
         <div class="card-list">
          <div class="my-5">
           <small class="text-uppercase text-muted">
            B
           </small>
          </div>
          <!-- Card -->
          <div class="card border-0">
           <div class="card-body">
            <div class="row align-items-center gx-5">
             <div class="col-auto">
              <a class="avatar" href="#">
               <img alt="" class="avatar-img" src="themes/messenger/2.2.0/assets/img/avatars/6.jpg"/>
              </a>
             </div>
             <div class="col">
              <h5>
               <a href="#">
                Bill Marrow
               </a>
              </h5>
              <p>
               last seen 3 days ago
              </p>
             </div>
             <div class="col-auto">
              <!-- Dropdown -->
              <div class="dropdown">
               <a aria-expanded="false" class="icon text-muted" data-bs-toggle="dropdown" href="#" role="button">
                <svg class="feather feather-more-vertical" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                 <circle cx="12" cy="12" r="1">
                 </circle>
                 <circle cx="12" cy="5" r="1">
                 </circle>
                 <circle cx="12" cy="19" r="1">
                 </circle>
                </svg>
               </a>
               <ul class="dropdown-menu">
                <li>
                 <a class="dropdown-item" href="#">
                  New message
                 </a>
                </li>
                <li>
                 <a class="dropdown-item" href="#">
                  Edit contact
                 </a>
                </li>
                <li>
                 <hr class="dropdown-divider"/>
                </li>
                <li>
                 <a class="dropdown-item text-danger" href="#">
                  Block user
                 </a>
                </li>
               </ul>
              </div>
             </div>
            </div>
           </div>
          </div>
          <!-- Card -->
          <div class="my-5">
           <small class="text-uppercase text-muted">
            D
           </small>
          </div>
          <!-- Card -->
          <div class="card border-0">
           <div class="card-body">
            <div class="row align-items-center gx-5">
             <div class="col-auto">
              <a class="avatar" href="#">
               <img alt="" class="avatar-img" src="themes/messenger/2.2.0/assets/img/avatars/5.jpg"/>
              </a>
             </div>
             <div class="col">
              <h5>
               <a href="#">
                Damian Binder
               </a>
              </h5>
              <p>
               last seen within a week
              </p>
             </div>
             <div class="col-auto">
              <!-- Dropdown -->
              <div class="dropdown">
               <a aria-expanded="false" class="icon text-muted" data-bs-toggle="dropdown" href="#" role="button">
                <svg class="feather feather-more-vertical" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                 <circle cx="12" cy="12" r="1">
                 </circle>
                 <circle cx="12" cy="5" r="1">
                 </circle>
                 <circle cx="12" cy="19" r="1">
                 </circle>
                </svg>
               </a>
               <ul class="dropdown-menu">
                <li>
                 <a class="dropdown-item" href="#">
                  New message
                 </a>
                </li>
                <li>
                 <a class="dropdown-item" href="#">
                  Edit contact
                 </a>
                </li>
                <li>
                 <hr class="dropdown-divider"/>
                </li>
                <li>
                 <a class="dropdown-item text-danger" href="#">
                  Block user
                 </a>
                </li>
               </ul>
              </div>
             </div>
            </div>
           </div>
          </div>
          <!-- Card -->
          <!-- Card -->
          <div class="card border-0">
           <div class="card-body">
            <div class="row align-items-center gx-5">
             <div class="col-auto">
              <a class="avatar avatar-online" href="#">
               <span class="avatar-text">
                D
               </span>
              </a>
             </div>
             <div class="col">
              <h5>
               <a href="#">
                Don Knight
               </a>
              </h5>
              <p>
               online
              </p>
             </div>
             <div class="col-auto">
              <!-- Dropdown -->
              <div class="dropdown">
               <a aria-expanded="false" class="icon text-muted" data-bs-toggle="dropdown" href="#" role="button">
                <svg class="feather feather-more-vertical" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                 <circle cx="12" cy="12" r="1">
                 </circle>
                 <circle cx="12" cy="5" r="1">
                 </circle>
                 <circle cx="12" cy="19" r="1">
                 </circle>
                </svg>
               </a>
               <ul class="dropdown-menu">
                <li>
                 <a class="dropdown-item" href="#">
                  New message
                 </a>
                </li>
                <li>
                 <a class="dropdown-item" href="#">
                  Edit contact
                 </a>
                </li>
                <li>
                 <hr class="dropdown-divider"/>
                </li>
                <li>
                 <a class="dropdown-item text-danger" href="#">
                  Block user
                 </a>
                </li>
               </ul>
              </div>
             </div>
            </div>
           </div>
          </div>
          <!-- Card -->
          <div class="my-5">
           <small class="text-uppercase text-muted">
            E
           </small>
          </div>
          <!-- Card -->
          <div class="card border-0">
           <div class="card-body">
            <div class="row align-items-center gx-5">
             <div class="col-auto">
              <a class="avatar avatar-online" href="#">
               <img alt="" class="avatar-img" src="themes/messenger/2.2.0/assets/img/avatars/8.jpg"/>
              </a>
             </div>
             <div class="col">
              <h5>
               <a href="#">
                Elise Dennis
               </a>
              </h5>
              <p>
               online
              </p>
             </div>
             <div class="col-auto">
              <!-- Dropdown -->
              <div class="dropdown">
               <a aria-expanded="false" class="icon text-muted" data-bs-toggle="dropdown" href="#" role="button">
                <svg class="feather feather-more-vertical" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                 <circle cx="12" cy="12" r="1">
                 </circle>
                 <circle cx="12" cy="5" r="1">
                 </circle>
                 <circle cx="12" cy="19" r="1">
                 </circle>
                </svg>
               </a>
               <ul class="dropdown-menu">
                <li>
                 <a class="dropdown-item" href="#">
                  New message
                 </a>
                </li>
                <li>
                 <a class="dropdown-item" href="#">
                  Edit contact
                 </a>
                </li>
                <li>
                 <hr class="dropdown-divider"/>
                </li>
                <li>
                 <a class="dropdown-item text-danger" href="#">
                  Block user
                 </a>
                </li>
               </ul>
              </div>
             </div>
            </div>
           </div>
          </div>
          <!-- Card -->
          <div class="my-5">
           <small class="text-uppercase text-muted">
            M
           </small>
          </div>
          <!-- Card -->
          <div class="card border-0">
           <div class="card-body">
            <div class="row align-items-center gx-5">
             <div class="col-auto">
              <a class="avatar" href="#">
               <span class="avatar-text">
                M
               </span>
              </a>
             </div>
             <div class="col">
              <h5>
               <a href="#">
                Marshall Wallaker
               </a>
              </h5>
              <p>
               last seen within a month
              </p>
             </div>
             <div class="col-auto">
              <!-- Dropdown -->
              <div class="dropdown">
               <a aria-expanded="false" class="icon text-muted" data-bs-toggle="dropdown" href="#" role="button">
                <svg class="feather feather-more-vertical" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                 <circle cx="12" cy="12" r="1">
                 </circle>
                 <circle cx="12" cy="5" r="1">
                 </circle>
                 <circle cx="12" cy="19" r="1">
                 </circle>
                </svg>
               </a>
               <ul class="dropdown-menu">
                <li>
                 <a class="dropdown-item" href="#">
                  New message
                 </a>
                </li>
                <li>
                 <a class="dropdown-item" href="#">
                  Edit contact
                 </a>
                </li>
                <li>
                 <hr class="dropdown-divider"/>
                </li>
                <li>
                 <a class="dropdown-item text-danger" href="#">
                  Block user
                 </a>
                </li>
               </ul>
              </div>
             </div>
            </div>
           </div>
          </div>
          <!-- Card -->
          <!-- Card -->
          <div class="card border-0">
           <div class="card-body">
            <div class="row align-items-center gx-5">
             <div class="col-auto">
              <a class="avatar" href="#">
               <img alt="" class="avatar-img" src="themes/messenger/2.2.0/assets/img/avatars/11.jpg"/>
              </a>
             </div>
             <div class="col">
              <h5>
               <a href="#">
                Mila White
               </a>
              </h5>
              <p>
               last seen a long time ago
              </p>
             </div>
             <div class="col-auto">
              <!-- Dropdown -->
              <div class="dropdown">
               <a aria-expanded="false" class="icon text-muted" data-bs-toggle="dropdown" href="#" role="button">
                <svg class="feather feather-more-vertical" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                 <circle cx="12" cy="12" r="1">
                 </circle>
                 <circle cx="12" cy="5" r="1">
                 </circle>
                 <circle cx="12" cy="19" r="1">
                 </circle>
                </svg>
               </a>
               <ul class="dropdown-menu">
                <li>
                 <a class="dropdown-item" href="#">
                  New message
                 </a>
                </li>
                <li>
                 <a class="dropdown-item" href="#">
                  Edit contact
                 </a>
                </li>
                <li>
                 <hr class="dropdown-divider"/>
                </li>
                <li>
                 <a class="dropdown-item text-danger" href="#">
                  Block user
                 </a>
                </li>
               </ul>
              </div>
             </div>
            </div>
           </div>
          </div>
          <!-- Card -->
          <div class="my-5">
           <small class="text-uppercase text-muted">
            O
           </small>
          </div>
          <!-- Card -->
          <div class="card border-0">
           <div class="card-body">
            <div class="row align-items-center gx-5">
             <div class="col-auto">
              <a class="avatar avatar-online" href="#">
               <span class="avatar-text">
                O
               </span>
              </a>
             </div>
             <div class="col">
              <h5>
               <a href="#">
                Ollie Chandler
               </a>
              </h5>
              <p>
               online
              </p>
             </div>
             <div class="col-auto">
              <!-- Dropdown -->
              <div class="dropdown">
               <a aria-expanded="false" class="icon text-muted" data-bs-toggle="dropdown" href="#" role="button">
                <svg class="feather feather-more-vertical" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                 <circle cx="12" cy="12" r="1">
                 </circle>
                 <circle cx="12" cy="5" r="1">
                 </circle>
                 <circle cx="12" cy="19" r="1">
                 </circle>
                </svg>
               </a>
               <ul class="dropdown-menu">
                <li>
                 <a class="dropdown-item" href="#">
                  New message
                 </a>
                </li>
                <li>
                 <a class="dropdown-item" href="#">
                  Edit contact
                 </a>
                </li>
                <li>
                 <hr class="dropdown-divider"/>
                </li>
                <li>
                 <a class="dropdown-item text-danger" href="#">
                  Block user
                 </a>
                </li>
               </ul>
              </div>
             </div>
            </div>
           </div>
          </div>
          <!-- Card -->
          <div class="my-5">
           <small class="text-uppercase text-muted">
            W
           </small>
          </div>
          <!-- Card -->
          <div class="card border-0">
           <div class="card-body">
            <div class="row align-items-center gx-5">
             <div class="col-auto">
              <a class="avatar" href="#">
               <img alt="" class="avatar-img" src="themes/messenger/2.2.0/assets/img/avatars/4.jpg"/>
              </a>
             </div>
             <div class="col">
              <h5>
               <a href="#">
                Warren White
               </a>
              </h5>
              <p>
               last seen recently
              </p>
             </div>
             <div class="col-auto">
              <!-- Dropdown -->
              <div class="dropdown">
               <a aria-expanded="false" class="icon text-muted" data-bs-toggle="dropdown" href="#" role="button">
                <svg class="feather feather-more-vertical" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                 <circle cx="12" cy="12" r="1">
                 </circle>
                 <circle cx="12" cy="5" r="1">
                 </circle>
                 <circle cx="12" cy="19" r="1">
                 </circle>
                </svg>
               </a>
               <ul class="dropdown-menu">
                <li>
                 <a class="dropdown-item" href="#">
                  New message
                 </a>
                </li>
                <li>
                 <a class="dropdown-item" href="#">
                  Edit contact
                 </a>
                </li>
                <li>
                 <hr class="dropdown-divider"/>
                </li>
                <li>
                 <a class="dropdown-item text-danger" href="#">
                  Block user
                 </a>
                </li>
               </ul>
              </div>
             </div>
            </div>
           </div>
          </div>
          <!-- Card -->
          <!-- Card -->
          <div class="card border-0">
           <div class="card-body">
            <div class="row align-items-center gx-5">
             <div class="col-auto">
              <a class="avatar avatar-online" href="#">
               <img alt="" class="avatar-img" src="themes/messenger/2.2.0/assets/img/avatars/7.jpg"/>
              </a>
             </div>
             <div class="col">
              <h5>
               <a href="#">
                William Wright
               </a>
              </h5>
              <p>
               online
              </p>
             </div>
             <div class="col-auto">
              <!-- Dropdown -->
              <div class="dropdown">
               <a aria-expanded="false" class="icon text-muted" data-bs-toggle="dropdown" href="#" role="button">
                <svg class="feather feather-more-vertical" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                 <circle cx="12" cy="12" r="1">
                 </circle>
                 <circle cx="12" cy="5" r="1">
                 </circle>
                 <circle cx="12" cy="19" r="1">
                 </circle>
                </svg>
               </a>
               <ul class="dropdown-menu">
                <li>
                 <a class="dropdown-item" href="#">
                  New message
                 </a>
                </li>
                <li>
                 <a class="dropdown-item" href="#">
                  Edit contact
                 </a>
                </li>
                <li>
                 <hr class="dropdown-divider"/>
                </li>
                <li>
                 <a class="dropdown-item text-danger" href="#">
                  Block user
                 </a>
                </li>
               </ul>
              </div>
             </div>
            </div>
           </div>
          </div>
          <!-- Card -->
         </div>
        </div>
       </div>
      </div>
     </div>
     <!-- Chats -->
     <div class="tab-pane fade h-100 show active" id="tab-content-chats" role="tabpanel">
      <div class="d-flex flex-column h-100 position-relative">
       <div class="hide-scrollbar">
        <div class="container py-8">
         <!-- Title -->
         <div class="mb-8">
          <h2 class="fw-bold m-0">
           Chats
          </h2>
         </div>
         <!-- Search -->
         <div class="mb-6">
          <form action="#">
           <div class="input-group">
            <div class="input-group-text">
             <div class="icon icon-lg">
              <svg class="feather feather-search" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
               <circle cx="11" cy="11" r="8">
               </circle>
               <line x1="21" x2="16.65" y1="21" y2="16.65">
               </line>
              </svg>
             </div>
            </div>
            <input aria-label="Search for messages or users..." class="form-control form-control-lg ps-0" placeholder="Search messages or users" type="text"/>
           </div>
          </form>
         </div>
         <!-- Chats -->
         <div class="card-list">
          <!-- Card -->
          {% if chat_users %}
                {% for user in chat_users %}
                <a href="{% url 'chat_group' user.id %}" class="card border-0 text-reset" id="toggleChatBtn">
                    <div class="card-body">
                     <div class="row gx-5">
                      <div class="col-auto">
                       <div class="avatar avatar-{{ user.status }}">
                        {% if user.photo_url %}
                            <img alt="#" class="avatar-img" src="{{user.photo_url.url}}"/>
                         {% else %}
                             <img alt="#" class="avatar-img" src="https://static.vecteezy.com/system/resources/previews/003/715/527/non_2x/picture-profile-icon-male-icon-human-or-people-sign-and-symbol-vector.jpg"/>
                         {% endif %}
                       </div>
                      </div>
                      <div class="col">
                       <div class="d-flex align-items-center mb-3">
                        <h5 class="me-auto mb-0">
                         {{user.first_name }}
                        </h5>
                        <span class="text-muted extra-small ms-2">
                         12:45 PM
                        </span>
                       </div>
{#                       <div class="d-flex align-items-center">#}
{#                        <div class="line-clamp me-auto">#}
{#                         Hello! Yeah, I'm going to meet my friend of mine at the departments stores now.#}
{#                        </div>#}
{#                        <div class="badge badge-circle bg-primary ms-5">#}
{#                         <span>#}
{#                          3#}
{#                         </span>#}
{#                        </div>#}
{#                       </div>#}
                      </div>
                     </div>
                    </div>
                   </a>
                {% endfor %}
          {% endif %}
         </div>
         <!-- Chats -->
        </div>
       </div>
      </div>
     </div>
     <!-- Notifications - Notices -->
     <div class="tab-pane fade h-100" id="tab-content-notifications" role="tabpanel">
      <div class="d-flex flex-column h-100">
       <div class="hide-scrollbar">
        <div class="container py-8">
         <!-- Title -->
         <div class="mb-8">
          <h2 class="fw-bold m-0">
           Notifications
          </h2>
         </div>
         <!-- Search -->
         <div class="mb-6">
          <form action="#">
           <div class="input-group">
            <div class="input-group-text">
             <div class="icon icon-lg">
              <svg class="feather feather-search" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
               <circle cx="11" cy="11" r="8">
               </circle>
               <line x1="21" x2="16.65" y1="21" y2="16.65">
               </line>
              </svg>
             </div>
            </div>
            <input aria-label="Search for messages or users..." class="form-control form-control-lg ps-0" placeholder="Search messages or users" type="text"/>
           </div>
          </form>
         </div>
         <!-- Today -->
         <div class="card-list">
          <!-- Title -->
          <div class="d-flex align-items-center my-4 px-6">
           <small class="text-muted me-auto">
            Today
           </small>
           <a class="text-muted small" href="#">
            Clear all
           </a>
          </div>
          <!-- Title -->
          <!-- Card -->
          <div class="card border-0 mb-5">
           <div class="card-body">
            <div class="row gx-5">
             <div class="col-auto">
              <!-- Avatar -->
              <a class="avatar" href="#">
               <img alt="" class="avatar-img" src="themes/messenger/2.2.0/assets/img/avatars/11.jpg"/>
               <div class="badge badge-circle bg-primary border-outline position-absolute bottom-0 end-0">
                <svg class="feather feather-user" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                 <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2">
                 </path>
                 <circle cx="12" cy="7" r="4">
                 </circle>
                </svg>
               </div>
              </a>
             </div>
             <div class="col">
              <div class="d-flex align-items-center mb-2">
               <h5 class="me-auto mb-0">
                <a href="#">
                 Mila White
                </a>
               </h5>
               <span class="extra-small text-muted ms-2">
                08:45 PM
               </span>
              </div>
              <div class="d-flex">
               <div class="me-auto">
                Send you a friend request.
               </div>
               <div class="dropdown ms-5">
                <a aria-expanded="false" class="icon text-muted" data-bs-toggle="dropdown" href="#" role="button">
                 <svg class="feather feather-more-horizontal" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="1">
                  </circle>
                  <circle cx="19" cy="12" r="1">
                  </circle>
                  <circle cx="5" cy="12" r="1">
                  </circle>
                 </svg>
                </a>
                <ul class="dropdown-menu">
                 <li>
                  <a class="dropdown-item" href="#">
                   Show less often
                  </a>
                 </li>
                 <li>
                  <a class="dropdown-item" href="#">
                   Hide
                  </a>
                 </li>
                </ul>
               </div>
              </div>
             </div>
            </div>
           </div>
           <div class="card-footer">
            <div class="row gx-4">
             <div class="col">
              <a class="btn btn-sm btn-soft-primary w-100" href="#">
               Hide
              </a>
             </div>
             <div class="col">
              <a class="btn btn-sm btn-primary w-100" href="#">
               Confirm
              </a>
             </div>
            </div>
           </div>
          </div>
          <!-- Card -->
          <!-- Card -->
          <div class="card border-0 mb-5">
           <div class="card-body">
            <div class="row gx-5">
             <div class="col-auto">
              <!-- Avatar -->
              <a class="avatar" href="#">
               <span class="avatar-text bg-warning">
                <svg class="feather feather-star" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                 <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
                 </polygon>
                </svg>
               </span>
               <div class="badge badge-circle bg-warning border-outline position-absolute bottom-0 end-0">
                <svg class="feather feather-gift" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                 <polyline points="20 12 20 22 4 22 4 12">
                 </polyline>
                 <rect height="5" width="20" x="2" y="7">
                 </rect>
                 <line x1="12" x2="12" y1="22" y2="7">
                 </line>
                 <path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z">
                 </path>
                 <path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z">
                 </path>
                </svg>
               </div>
              </a>
             </div>
             <div class="col">
              <div class="d-flex align-items-center mb-2">
               <h5 class="me-auto mb-0">
                <a href="#">
                 Congratulations!
                </a>
               </h5>
               <span class="extra-small text-muted ms-2">
                08:45 PM
               </span>
              </div>
              <div class="d-flex">
               <div class="me-auto">
                You win 5GB free disk space.
               </div>
               <div class="dropdown ms-5">
                <a aria-expanded="false" class="icon text-muted" data-bs-toggle="dropdown" href="#" role="button">
                 <svg class="feather feather-more-horizontal" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="1">
                  </circle>
                  <circle cx="19" cy="12" r="1">
                  </circle>
                  <circle cx="5" cy="12" r="1">
                  </circle>
                 </svg>
                </a>
                <ul class="dropdown-menu">
                 <li>
                  <a class="dropdown-item" href="#">
                   Show less often
                  </a>
                 </li>
                 <li>
                  <a class="dropdown-item" href="#">
                   Hide
                  </a>
                 </li>
                </ul>
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
          <!-- Card -->
         </div>
         <!-- Today -->
         <!-- Yesterday -->
         <div class="card-list mt-8">
          <!-- Title -->
          <div class="d-flex align-items-center my-4 px-6">
           <small class="text-muted me-auto">
            Yesterday
           </small>
           <a class="text-muted small" href="#">
            Clear all
           </a>
          </div>
          <!-- Title -->
          <!-- Card -->
          <div class="card border-0 mb-5">
           <div class="card-body">
            <div class="row gx-5">
             <div class="col-auto">
              <!-- Avatar -->
              <div class="avatar">
               <span class="avatar-text bg-success">
                <svg class="feather feather-lock" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                 <rect height="11" rx="2" ry="2" width="18" x="3" y="11">
                 </rect>
                 <path d="M7 11V7a5 5 0 0 1 10 0v4">
                 </path>
                </svg>
               </span>
               <div class="badge badge-circle bg-success border-outline position-absolute bottom-0 end-0">
                <svg class="feather feather-refresh-ccw" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                 <polyline points="1 4 1 10 7 10">
                 </polyline>
                 <polyline points="23 20 23 14 17 14">
                 </polyline>
                 <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15">
                 </path>
                </svg>
               </div>
              </div>
             </div>
             <div class="col">
              <div class="d-flex align-items-center mb-2">
               <h5 class="me-auto mb-0">
                Password Changed
               </h5>
               <span class="extra-small text-muted ms-2">
                08:45 PM
               </span>
              </div>
              <div class="d-flex">
               <div class="me-auto">
                Your password has been
                <br/>
                updated successfully.
               </div>
               <div class="dropdown ms-5">
                <a aria-expanded="false" class="icon text-muted" data-bs-toggle="dropdown" href="#" role="button">
                 <svg class="feather feather-more-horizontal" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="1">
                  </circle>
                  <circle cx="19" cy="12" r="1">
                  </circle>
                  <circle cx="5" cy="12" r="1">
                  </circle>
                 </svg>
                </a>
                <ul class="dropdown-menu">
                 <li>
                  <a class="dropdown-item" href="#">
                   Show less often
                  </a>
                 </li>
                 <li>
                  <a class="dropdown-item" href="#">
                   Hide
                  </a>
                 </li>
                </ul>
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
          <!-- Card -->
         </div>
         <!-- Yesterday -->
         <!-- Previous -->
         <div class="card-list mt-8">
          <!-- Title -->
          <div class="d-flex align-items-center my-4 px-6">
           <small class="text-muted me-auto">
            Previous
           </small>
           <a class="text-muted small" href="#">
            Clear all
           </a>
          </div>
          <!-- Title -->
          <!-- Card -->
          <div class="card border-0">
           <div class="card-body">
            <div class="row gx-5">
             <div class="col-auto">
              <!-- Avatar -->
              <a class="avatar" href="#">
               <img alt="" class="avatar-img" src="themes/messenger/2.2.0/assets/img/avatars/7.jpg"/>
               <div class="badge badge-circle bg-primary border-outline position-absolute bottom-0 end-0">
                <svg class="feather feather-image" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                 <rect height="18" rx="2" ry="2" width="18" x="3" y="3">
                 </rect>
                 <circle cx="8.5" cy="8.5" r="1.5">
                 </circle>
                 <polyline points="21 15 16 10 5 21">
                 </polyline>
                </svg>
               </div>
              </a>
             </div>
             <div class="col">
              <div class="d-flex align-items-center mb-2">
               <h5 class="me-auto mb-0">
                <a href="#">
                 William Wright
                </a>
               </h5>
               <span class="extra-small text-muted ms-2">
                08:45 PM
               </span>
              </div>
              <div class="d-flex">
               <div class="me-auto">
                Updated profile picture.
               </div>
               <div class="dropdown ms-5">
                <a aria-expanded="false" class="icon text-muted" data-bs-toggle="dropdown" href="#" role="button">
                 <svg class="feather feather-more-horizontal" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="1">
                  </circle>
                  <circle cx="19" cy="12" r="1">
                  </circle>
                  <circle cx="5" cy="12" r="1">
                  </circle>
                 </svg>
                </a>
                <ul class="dropdown-menu">
                 <li>
                  <a class="dropdown-item" href="#">
                   Show less often
                  </a>
                 </li>
                 <li>
                  <a class="dropdown-item" href="#">
                   Hide
                  </a>
                 </li>
                </ul>
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
          <!-- Card -->
          <!-- Card -->
          <div class="card border-0">
           <div class="card-body">
            <div class="row gx-5">
             <div class="col-auto">
              <!-- Avatar -->
              <a class="avatar" href="#">
               <img alt="" class="avatar-img" src="themes/messenger/2.2.0/assets/img/avatars/9.jpg"/>
               <div class="badge badge-circle bg-primary border-outline position-absolute bottom-0 end-0">
                <svg class="feather feather-message-circle" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                 <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                 </path>
                </svg>
               </div>
              </a>
             </div>
             <div class="col">
              <div class="d-flex align-items-center mb-2">
               <h5 class="me-auto mb-0">
                <a href="#">
                 Don Knight
                </a>
               </h5>
               <span class="extra-small text-muted ms-2">
                08:45 PM
               </span>
              </div>
              <div class="d-flex">
               <!-- <div class="me-auto">Removed you from the chat <a href="#" class="text-reset">Bootstrap Community</a>.</div> -->
               <div class="me-auto">
                Send you a private message.
               </div>
               <div class="dropdown ms-5">
                <a aria-expanded="false" class="icon text-muted" data-bs-toggle="dropdown" href="#" role="button">
                 <svg class="feather feather-more-horizontal" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="1">
                  </circle>
                  <circle cx="19" cy="12" r="1">
                  </circle>
                  <circle cx="5" cy="12" r="1">
                  </circle>
                 </svg>
                </a>
                <ul class="dropdown-menu">
                 <li>
                  <a class="dropdown-item" href="#">
                   Show less often
                  </a>
                 </li>
                 <li>
                  <a class="dropdown-item" href="#">
                   Hide
                  </a>
                 </li>
                </ul>
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
          <!-- Card -->
          <!-- Card -->
          <div class="card border-0">
           <div class="card-body">
            <div class="row gx-5">
             <div class="col-auto">
              <!-- Avatar -->
              <a class="avatar avatar-badged" data-theme-toggle="tab" href="#tab-settings">
               <span class="avatar-text bg-danger">
                <svg class="feather feather-bell" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                 <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9">
                 </path>
                 <path d="M13.73 21a2 2 0 0 1-3.46 0">
                 </path>
                </svg>
               </span>
               <div class="badge badge-circle bg-danger border-outline position-absolute bottom-0 end-0">
                <svg class="feather feather-power" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                 <path d="M18.36 6.64a9 9 0 1 1-12.73 0">
                 </path>
                 <line x1="12" x2="12" y1="2" y2="12">
                 </line>
                </svg>
               </div>
              </a>
             </div>
             <div class="col">
              <div class="d-flex align-items-center mb-2">
               <h5 class="me-auto mb-0">
                <a data-theme-toggle="tab" href="#tab-settings">
                 Notifications
                </a>
               </h5>
               <span class="extra-small text-muted ms-2">
                08:45 PM
               </span>
              </div>
              <div class="d-flex">
               <div class="me-auto">
                Please turn on notifications.
               </div>
               <div class="dropdown ms-5">
                <a aria-expanded="false" class="icon text-muted" data-bs-toggle="dropdown" href="#" role="button">
                 <svg class="feather feather-more-horizontal" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="1">
                  </circle>
                  <circle cx="19" cy="12" r="1">
                  </circle>
                  <circle cx="5" cy="12" r="1">
                  </circle>
                 </svg>
                </a>
                <ul class="dropdown-menu">
                 <li>
                  <a class="dropdown-item" href="#">
                   Show less often
                  </a>
                 </li>
                 <li>
                  <a class="dropdown-item" href="#">
                   Hide
                  </a>
                 </li>
                </ul>
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
         <!-- Card -->
        </div>
       </div>
      </div>
     </div>
     <!-- Settings -->
     <div class="tab-pane fade h-100" id="tab-content-settings" role="tabpanel">
      <div class="d-flex flex-column h-100">
       <div class="hide-scrollbar">
        <div class="container py-8">
         <!-- Title -->
         <div class="mb-8">
          <h2 class="fw-bold m-0">
           Settings
          </h2>
         </div>
         <!-- Search -->
         <div class="mb-6">
          <form action="#">
           <div class="input-group">
            <div class="input-group-text">
             <div class="icon icon-lg">
              <svg class="feather feather-search" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
               <circle cx="11" cy="11" r="8">
               </circle>
               <line x1="21" x2="16.65" y1="21" y2="16.65">
               </line>
              </svg>
             </div>
            </div>
            <input aria-label="Search for messages or users..." class="form-control form-control-lg ps-0" placeholder="Search messages or users" type="text"/>
           </div>
          </form>
         </div>
         <!-- Profile -->
         <div class="card border-0">
          <div class="card-body">
           <div class="row align-items-center gx-5">
            <div class="col-auto">
             <div class="avatar">
              {% if request.user.is_authenticated and request.user.photo_url %}
                <img alt="#" class="avatar-img" src="{{request.user.photo_url.url}}"/>
             {% else %}
                 <img alt="#" class="avatar-img" src="https://static.vecteezy.com/system/resources/previews/003/715/527/non_2x/picture-profile-icon-male-icon-human-or-people-sign-and-symbol-vector.jpg"/>
             {% endif %}
              <div class="badge badge-circle bg-secondary border-outline position-absolute bottom-0 end-0">
               <svg class="feather feather-image" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                <rect height="18" rx="2" ry="2" width="18" x="3" y="3">
                </rect>
                <circle cx="8.5" cy="8.5" r="1.5">
                </circle>
                <polyline points="21 15 16 10 5 21">
                </polyline>
               </svg>
              </div>
                <input class="d-none" id="upload-profile-photo" type="file" onchange="uploadPhoto()"/>
                <label class="stretched-label mb-0" for="upload-profile-photo"></label>
              </label>
             </div>
            </div>
            <div class="col">
             <h5>
              {% if request.user.is_authenticated and request.user.first_name %}
         	    {{ request.user.get_full_name }}
             {% else %}
                 Name isn't available
             {% endif %}
             </h5>
             <p>
              {{ request.user.username }}
             </p>
            </div>
            <div class="col-auto">
             <a class="text-muted" href="{% url 'users:logout_user' %}">
              <div class="icon">
               <svg class="feather feather-log-out" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4">
                </path>
                <polyline points="16 17 21 12 16 7">
                </polyline>
                <line x1="21" x2="9" y1="12" y2="12">
                </line>
               </svg>
              </div>
             </a>
            </div>
           </div>
          </div>
         </div>
         <!-- Profile -->
         <!-- Account -->
         <div class="mt-8">
          <div class="d-flex align-items-center mb-4 px-6">
           <small class="text-muted me-auto">
            Account
           </small>
          </div>
          <div class="card border-0">
           <div class="card-body py-2">
            <!-- Accordion -->
            <div class="accordion accordion-flush" id="accordion-profile">
             <div class="accordion-item">
              <div class="accordion-header" id="accordion-profile-1">
               <a aria-controls="accordion-profile-body-1" aria-expanded="false" class="accordion-button text-reset collapsed" data-bs-target="#accordion-profile-body-1" data-bs-toggle="collapse" href="#">
                <div>
                 <h5>
                  Profile settings
                 </h5>
                 <p>
                  Change your profile settings
                 </p>
                </div>
               </a>
              </div>
              <form aria-labelledby="accordion-profile-1" class="accordion-collapse collapse" data-parent="#accordion-profile" id="accordion-profile-body-1">
               <form class="accordion-body" method="post" action="{% url 'users:update_profile' %}">
                {% csrf_token %}
                <div class="form-floating mb-6">
                 <input class="form-control" id="first_name" placeholder="Name" type="text" value="{{ request.user.first_name }}"/>
                 <label for="profile-name">
                  First name
                 </label>
                </div>
                <div class="form-floating mb-6">
                    <input class="form-control" id="last_name" placeholder="Name" type="text" value="{{ request.user.last_name }}"/>
                    <label for="profile-name">
                     Last name
                    </label>
                   </div>
                <div class="form-floating mb-6">
                 <input class="form-control" id="profile-email" placeholder="Email address" type="email" value="{{ request.user.email }}" disabled/>
                 <label for="profile-email">
                  Email
                 </label>
                </div>
                <div class="form-floating mb-6">
                    <select class="form-select" id="country" name="country">
                        <option value="" selected>{% if request.user.country %}{{ request.user.country }}{% else %}Select your country{% endif %}</option>
                    </select>
                    <label for="country">Country</label>
                </div>
                <div class="form-floating mb-6">
                    <select class="form-select" id="region" name="region">
                        <option value="" selected>{% if request.user.city %}{{ request.user.city }}{% else %}Select your region{% endif %}</option>
                    </select>
                    <label for="region">Country</label>
                </div>
                <div class="form-floating mb-6">
                    <select class="form-select" id="gender" name="gender">
                        <option value="">
                            {% if request.user.gender %}
                                {% if request.user.gender == 'M' %}
                                Male
                                {% else %}
                                Female
                                {% endif %}
                            {% else %}
                            Select a gender
                            {% endif %}
                        </option>
                        <option value="M">
                            Male
                        </option>
                        <option value="F">
                            Female
                        </option>
                    </select>
                    <label for="gender">Gender</label>
                </div>
                <div class="form-floating mb-6">
                 <textarea class="form-control" data-autosize="true" id="profile-bio" placeholder="Bio" style="min-height: 120px;">{% if request.user.bio %}{{ request.user.bio }}{% endif %}</textarea>
                 <label for="profile-bio">
                  Bio
                 </label>
                </div>
                <button class="btn btn-block btn-lg btn-primary w-100" id="save-profile" type="button">
                 Save
                </button>
               </form>
              </form>
             <!-- Switch -->
             <div class="accordion-item">
              <div class="accordion-header">
               <div class="row align-items-center">
                <div class="col">
                 <h5>
                  Appearance
                 </h5>
                 <p>
                  Choose light or dark theme
                 </p>
                </div>
                <div class="col-auto">
                 <a class="switcher-btn text-reset" href="#!" title="Themes">
                  <div class="switcher-icon switcher-icon-dark icon icon-lg d-none" data-theme-mode="dark">
                   <svg class="feather feather-moon" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z">
                    </path>
                   </svg>
                  </div>
                  <div class="switcher-icon switcher-icon-light icon icon-lg d-none" data-theme-mode="light">
                   <svg class="feather feather-sun" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="5">
                    </circle>
                    <line x1="12" x2="12" y1="1" y2="3">
                    </line>
                    <line x1="12" x2="12" y1="21" y2="23">
                    </line>
                    <line x1="4.22" x2="5.64" y1="4.22" y2="5.64">
                    </line>
                    <line x1="18.36" x2="19.78" y1="18.36" y2="19.78">
                    </line>
                    <line x1="1" x2="3" y1="12" y2="12">
                    </line>
                    <line x1="21" x2="23" y1="12" y2="12">
                    </line>
                    <line x1="4.22" x2="5.64" y1="19.78" y2="18.36">
                    </line>
                    <line x1="18.36" x2="19.78" y1="5.64" y2="4.22">
                    </line>
                   </svg>
                  </div>
                 </a>
                </div>
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
         <!-- Account -->
         <!-- Security -->
         <div class="mt-8">
          <div class="d-flex align-items-center my-4 px-6">
           <small class="text-muted me-auto">
            Security
           </small>
          </div>
          <div class="card border-0">
           <div class="card-body py-2">
            <!-- Accordion -->
            <div class="accordion accordion-flush" id="accordion-security">
             <div class="accordion-item">
              <div class="accordion-header" id="accordion-security-1">
               <a aria-controls="accordion-security-body-1" aria-expanded="false" class="accordion-button text-reset collapsed" data-bs-target="#accordion-security-body-1" data-bs-toggle="collapse" href="#">
                <div>
                 <h5>
                  Password
                 </h5>
                 <p>
                  Change your password
                 </p>
                </div>
               </a>
              </div>
              <div aria-labelledby="accordion-security-1" class="accordion-collapse collapse" data-parent="#accordion-security" id="accordion-security-body-1">
               <div class="accordion-body">
                <form action="#" autocomplete="on">
                 <div class="form-floating mb-6">
                  <input autocomplete="" class="form-control" id="profile-current-password" placeholder="Current Password" type="password"/>
                  <label for="profile-current-password">
                   Current Password
                  </label>
                 </div>
                 <div class="form-floating mb-6">
                  <input autocomplete="" class="form-control" id="profile-new-password" placeholder="New password" type="password"/>
                  <label for="profile-new-password">
                   New password
                  </label>
                 </div>
                 <div class="form-floating mb-6">
                  <input autocomplete="" class="form-control" id="profile-verify-password" placeholder="Verify Password" type="password"/>
                  <label for="profile-verify-password">
                   Verify Password
                  </label>
                 </div>
                </form>
                <button class="btn btn-block btn-lg btn-primary w-100" type="button">
                 Save
                </button>
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
         <!-- Security -->
         <!-- Notifications -->
         <div class="mt-8">
          <div class="d-flex align-items-center my-4 px-6">
           <small class="text-muted me-auto">
            Notifications
           </small>
          </div>
          <!-- Accordion -->
          <div class="card border-0">
           <div class="card-body py-2">
            <div class="accordion accordion-flush" id="accordion-notifications">
             <div class="accordion-item">
             
              <div aria-labelledby="accordion-notifications-1" class="accordion-collapse collapse" data-parent="#accordion-notifications" id="accordion-notifications-body-1">
               <div class="accordion-body">
                <div class="row align-items-center">
                 <div class="col">
                  <h5>
                   Text
                  </h5>
                  <p>
                   Show text in notifications
                  </p>
                 </div>
                 <div class="col-auto">
                  <div class="form-check form-switch">
                   <input class="form-check-input" id="accordion-notifications-check-1" type="checkbox"/>
                   <label class="form-check-label" for="accordion-notifications-check-1">
                   </label>
                  </div>
                 </div>
                </div>
               </div>
              </div>
             </div>
             <div class="accordion-item">
              <div class="accordion-header">
               <div class="row align-items-center">
                <div class="col">
                 <h5>
                  Sound
                 </h5>
                 <p>
                  Enable sound notifications
                 </p>
                </div>
                <div class="col-auto">
                 <div class="form-check form-switch">
                  <input class="form-check-input" id="accordion-notifications-check-3" type="checkbox"/>
                  <label class="form-check-label" for="accordion-notifications-check-3">
                  </label>
                 </div>
                </div>
               </div>
              </div>
             </div>
            </div>
           </div>
          </div>
         </div>
         <!-- Notifications -->
        </div>
       </div>
      </div>
     </div>
    </div>
    </div>
   </aside>
<script>
    const username = "asadbekjon";
    const countrySelect = document.getElementById("country");
    const regionSelect = document.getElementById("region");


    fetch(`http://api.geonames.org/countryInfoJSON?lang=en&username=${username}`)
        .then(response => response.json())
        .then(data => {
            const countries = data.geonames;
            countries.forEach(country => {
                const option = document.createElement("option");
                option.value = country.geonameId;
                option.text = country.countryName;
                countrySelect.appendChild(option);
            });
        })
        .catch(error => console.error("Davlatlarni yuklashda xato:", error));

    countrySelect.addEventListener("change", function() {
        const geonameId = this.value;
        regionSelect.innerHTML = "<option value=''>Select a region</option>";
        regionSelect.disabled = true;

        if (geonameId) {
            fetch(`http://api.geonames.org/childrenJSON?lang=en&geonameId=${geonameId}&username=${username}`)
                .then(response => response.json())
                .then(data => {
                    if (data.geonames) {
                        const regions = data.geonames;
                        regions.forEach(region => {
                            const option = document.createElement("option");
                            option.value = region.geonameId;
                            option.text = region.name;
                            regionSelect.appendChild(option);
                        });
                        regionSelect.disabled = false;
                    }
                })
                .catch(error => console.error("Regionlarni yuklashda xato:", error));
        }
    });

    document.getElementById("country").addEventListener("change", function () {
        let selectedOption = this.options[this.selectedIndex];
        let selectedText = selectedOption.textContent;
    });

    function showToast(message, type) {
        const toastContainer = document.querySelector('.toast-container');

        const toast = document.createElement('div');
        toast.className = `toast align-items-center text-white border-0 position-relative show`;
        toast.setAttribute('role', 'alert');
        toast.setAttribute('aria-live', 'assertive');
        toast.setAttribute('aria-atomic', 'true');
        toast.style.minWidth = '250px';
        toast.style.marginBottom = '10px';
        toast.style.padding = '10px 15px';
        toast.style.borderRadius = '5px';
        toast.style.color = 'white';

        if (type === 'success') {
            toast.style.backgroundColor = '#0f79f4';
        } else if (type === 'danger') {
            toast.style.backgroundColor = 'red';
        } else if (type === 'info') {
            toast.style.backgroundColor = 'blue';
        } else if (type === 'warning') {
            toast.style.backgroundColor = 'orange';
        } else {
            toast.style.backgroundColor = 'gray';
        }

        toast.innerHTML = `
            <div class="toast-body">
                ${message}
            </div>
            <div class="toast-progress"></div>
        `;

        toastContainer.appendChild(toast);

        setTimeout(() => {
            toast.remove();
        }, 3000);
    }

    document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("save-profile").addEventListener("click", function () {
            let csrfToken = getCookie("csrftoken") || document.querySelector("[name=csrfmiddlewaretoken]").value;

            let firstName = document.getElementById("first_name").value;
            let lastName = document.getElementById("last_name").value;
            let country = document.getElementById("country");
            let region = document.getElementById("region");
            let gender = document.getElementById("gender").value;
            let bio = document.getElementById("profile-bio").value;

            let selectedOptionCountry = country.options[country.selectedIndex];
            let countryText = selectedOptionCountry.textContent;

            let selectedOptionRegion = region.options[region.selectedIndex];
            let regionText = selectedOptionRegion.textContent;

            fetch("/users/update-profile/", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "X-CSRFToken": csrfToken
                },
                credentials: "same-origin",
                body: JSON.stringify({
                    first_name: firstName,
                    last_name: lastName,
                    country: countryText,
                    region: regionText,
                    gender: gender,
                    bio: bio
                })
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Network response was not ok");
                }
                return response.json();
            })
            .then(data => {
                showToast(data.message, "success")
                console.log(data.message);
            })
            .catch(error => {
                console.error("Error:", error);
                alert("An error occurred while updating the profile.");
            });
        });

        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== "") {
                let cookies = document.cookie.split(";");
                for (let i = 0; i < cookies.length; i++) {
                    let cookie = cookies[i].trim();
                    if (cookie.startsWith(name + "=")) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
    });

    const uploadInput = document.getElementById('upload-profile-photo');
    const avatarImgs = document.querySelectorAll('.avatar-img')

    uploadInput.addEventListener('change', (event) => {
        const file = event.target.files[0];
        if (!file) return;

        const formData = new FormData();
        formData.append('photo', file);

        fetch("{% url 'users:update_photo' %}", {
            method: 'POST',
            body: formData,
            headers: {
                'X-CSRFToken': '{{ csrf_token }}'
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === 'success') {
                showToast(data.message, "success")
                avatarImgs.forEach(img => {
                    img.src = data.photo_url + '?timestamp=' + new Date().getTime();
                });
            } else {
                alert(data.message);
            }
        })
        .catch(error => {
            console.error('Error:', error);
        });
    });
</script>